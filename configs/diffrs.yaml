# DiffRS Discriminator Head Training Configuration
#
# Train a convolutional classification head on top of a frozen diffusion model's
# encoder to distinguish real vs generated samples at various noise levels.
#
# Usage:
#   python -m medgen.scripts.train_diffrs_discriminator \
#       diffusion_checkpoint=runs/bravo/checkpoint_best.pt mode=bravo
#
#   # Quick test
#   python -m medgen.scripts.train_diffrs_discriminator \
#       diffusion_checkpoint=runs/bravo/checkpoint_best.pt \
#       mode=bravo num_generated_samples=100 num_epochs=5

defaults:
  - /paths: local
  - _self_

# Required: path to trained diffusion model checkpoint
diffusion_checkpoint: null

# Data mode (determines which image type to load for real samples)
# Named 'data_mode' to avoid collision with configs/mode/ Hydra group
data_mode: bravo

# Spatial dimensions (2 for 2D, 3 for 3D)
spatial_dims: 2
image_size: 128
depth: 160  # Only used for 3D

# Data generation
num_generated_samples: 5000   # Max samples per split (uses all available if fewer)
generation_num_steps: 25      # Steps for sample generation
val_split: test               # Split for validation (null to disable)

# Discriminator head architecture
mid_channels: 128             # Hidden channels in conv layers (~0.9M params for 3D, ~0.3M for 2D)

# Training hyperparameters (matching official DiffRS defaults)
num_epochs: 60
batch_size: 32
learning_rate: 3e-4
weight_decay: 1e-7

# Output
output_dir: runs/diffrs

# Hydra configuration
hydra:
  run:
    dir: .
  output_subdir: null
